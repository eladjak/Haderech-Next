# פרופיל משתמש ודאשבורד - תיעוד

מסמך זה מתאר את פונקציונליות פרופיל המשתמש והדאשבורד האישי באפליקציית "הדרך".

## סקירה כללית

פרופיל המשתמש והדאשבורד האישי מספקים למשתמש תצוגה מרוכזת של המידע האישי, ההתקדמות בלמידה, והפעילות שלו במערכת. הם משמשים כנקודת כניסה מרכזית לניהול החשבון ולמעקב אחר ההתקדמות.

## מרכיבים עיקריים

### 1. פרופיל אישי

המרכיב הבסיסי שמציג את פרטי המשתמש ומאפשר ניהול מידע אישי:

- **פרטים אישיים** - שם, כתובת דוא"ל, תמונת פרופיל
- **הגדרות חשבון** - שינוי סיסמה, הגדרות אבטחה, שפה מועדפת
- **העדפות פרטיות** - ניהול הרשאות שיתוף מידע והודעות

### 2. דאשבורד התקדמות

תצוגה גרפית של ההתקדמות בלמידה:

- **סיכום קורסים** - רשימת הקורסים שהמשתמש רשום אליהם ומצב ההתקדמות
- **גרפים התקדמות** - תצוגה ויזואלית של ההתקדמות לאורך זמן
- **יעדים ומטרות** - הצגת היעדים האישיים והמטרות שהמשתמש הגדיר והתקדמות לקראתם

### 3. הישגים ותגים

מערכת תמריצים ומוטיבציה:

- **הישגים** - תצוגת הישגים שהושגו ע"י המשתמש
- **תגים** - אוסף של תגים שהתקבלו עבור פעילויות שונות
- **לוח מובילים** - השוואה לגבי הישגי המשתמש ביחס למשתמשים אחרים

### 4. היסטוריית פעילות

תיעוד של פעילות המשתמש במערכת:

- **שיעורים אחרונים** - רשימת השיעורים האחרונים שהושלמו
- **פעילות בפורומים** - סיכום הפעילות בפורומי הדיונים
- **תרגולים אחרונים** - הצגת תוצאות מהתרגולים האחרונים בסימולטור

### 5. הודעות והתראות

מרכז התקשורת של המשתמש:

- **התראות** - הצגת התראות מערכת ותזכורות
- **הודעות** - ניהול הודעות מהמנהלים ומהודעות קהילה
- **הזמנות** - הזמנות לפעילויות קבוצתיות או קורסים חדשים

## ארכיטקטורה טכנית

### רכיבי לקוח (Client-Side)

- **ProfileHeader** - רכיב העליון של דף הפרופיל המציג פרטים בסיסיים.
- **ProfileForm** - טופס לעריכת פרטי המשתמש.
- **ProfileStats** - תצוגת סטטיסטיקות והישגים.
- **ProfileDashboard** - תצוגת הדאשבורד המרכזי עם כל הנתונים.
- **ActivityFeed** - פיד של פעילויות אחרונות.
- **NotificationCenter** - ניהול הודעות והתראות.

### רכיבי שרת (Server-Side)

- **ProfileService** - ניהול נתוני פרופיל והתממשקות עם מסד הנתונים.
- **ProgressService** - חישוב והערכת התקדמות המשתמש.
- **AchievementService** - ניהול הישגים ותגים.
- **NotificationService** - ניהול התראות והודעות.

### מודל נתונים

טבלאות עיקריות בבסיס הנתונים:

- `users` - פרטי משתמש בסיסיים
- `profiles` - פרטי פרופיל מורחבים
- `user_progress` - נתוני התקדמות בקורסים
- `achievements` - הישגים שהתקבלו
- `activity_logs` - רישום פעילויות המשתמש
- `notifications` - הודעות והתראות למשתמש

## תזרים שימוש

### צפייה בפרופיל

1. המשתמש נכנס לדף הפרופיל (`/profile`)
2. המערכת מבצעת בקשה לנתוני המשתמש מ-`getProfile` API
3. נתוני הפרופיל, ההתקדמות, וההישגים נטענים ומוצגים בדאשבורד

### עדכון פרופיל

1. המשתמש עורך את פרטי הפרופיל בטופס
2. הפרטים נשלחים לשרת דרך `updateProfile` API
3. השרת מעדכן את נתוני המשתמש ומחזיר אישור
4. הממשק מתעדכן עם המידע החדש

### מעקב אחר התקדמות

1. המשתמש גולל למדור "התקדמות" בדאשבורד
2. מוצגים גרפים וויזואליזציות של התקדמות בקורסים לאורך זמן
3. המשתמש יכול לסנן את הנתונים לפי קורס או תקופת זמן

## תכונות מתקדמות

### 1. ניתוח התנהגות למידה

המערכת מנתחת את דפוסי הלמידה של המשתמש ומספקת תובנות:

- זמני למידה אופטימליים
- נושאים בהם המשתמש חזק או מתקשה
- המלצות אישיות להמשך למידה

### 2. יעדים אישיים

המשתמש יכול להגדיר יעדים אישיים ולעקוב אחריהם:

- הגדרת יעדי למידה שבועיים/חודשיים
- התקדמות לקראת השלמת קורסים
- יעדי השתתפות בפעילויות קהילתיות

### 3. אינטגרציה חברתית

חיבור לפעילות החברתית במערכת:

- הצגת חברים ועמיתים ללמידה
- אפשרות לשתף הישגים ברשתות חברתיות
- תמיכה בלמידה קבוצתית ויצירת קבוצות למידה

## סטטוס פיתוח

- [x] פרופיל בסיסי עם פרטי משתמש
- [x] תצוגת התקדמות בקורסים
- [x] הצגת סטטיסטיקות פעילות
- [ ] מערכת הישגים מתקדמת
- [ ] דאשבורד מותאם אישית עם אפשרויות התאמה
- [ ] ניתוח התנהגות למידה והמלצות חכמות
- [ ] אינטגרציה מלאה עם פלטפורמות חברתיות

## התקנה ושימוש למפתחים

### קבצים רלוונטיים

- `src/components/profile/` - רכיבי הפרופיל
- `src/app/profile/` - דפי הפרופיל
- `src/lib/services/profile.ts` - שירות הפרופיל
- `src/lib/services/progress.ts` - שירות התקדמות

### הוספת תכונה חדשה לפרופיל

1. הגדר את הטיפוסים הדרושים ב-`src/types/profile.ts`
2. הוסף לוגיקת שרת ב-`src/lib/services/profile.ts`
3. צור/עדכן את ה-API endpoint ב-`src/app/api/profile/`
4. הוסף את הרכיב החדש ב-`src/components/profile/`
5. שלב את הרכיב בדף הפרופיל ב-`src/app/profile/page.tsx`

## שאלות נפוצות למפתחים

### כיצד להוסיף סוג הישג חדש?

1. הוסף את סוג ההישג ב-`src/types/achievements.ts`
2. הגדר את הלוגיקה לקבלת ההישג ב-`src/lib/services/achievements.ts`
3. הוסף את האיקון והתצוגה הויזואלית ב-`src/components/achievement.tsx`

### איך לשלב דאטה ויזואליזציה חדשה?

1. התקן את ספריות הויזואליזציה הנדרשות (`pnpm add recharts` או דומה)
2. צור רכיב חדש ב-`src/components/profile/charts/`
3. שלב את הרכיב ב-`src/components/profile/ProfileStats.tsx`

## נספחים

### מודל נתונים מפורט

```sql
-- טבלת משתמשים מורחבת
CREATE TABLE user_profiles (
  id UUID REFERENCES auth.users NOT NULL PRIMARY KEY,
  display_name TEXT,
  bio TEXT,
  avatar_url TEXT,
  preferences JSONB,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);

-- טבלת התקדמות
CREATE TABLE user_progress (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users NOT NULL,
  course_id UUID REFERENCES courses NOT NULL,
  progress FLOAT NOT NULL DEFAULT 0,
  last_activity TIMESTAMP WITH TIME ZONE DEFAULT now(),
  completed_lessons INTEGER[] DEFAULT '{}',
  time_spent INTEGER DEFAULT 0,
  UNIQUE(user_id, course_id)
);

-- טבלת הישגים
CREATE TABLE user_achievements (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users NOT NULL,
  achievement_id TEXT NOT NULL,
  earned_at TIMESTAMP WITH TIME ZONE DEFAULT now(),
  metadata JSONB,
  UNIQUE(user_id, achievement_id)
);
```

### דוגמה לניתוח התנהגות למידה

הניתוח מתבסס על הפרמטרים הבאים:

- זמני פעילות במערכת
- משך זמן בכל שיעור/נושא
- ביצועים במבחנים ותרגולים
- תדירות השתתפות בפורומים

התוצאה היא פרופיל לומד שמזהה:

- זמני למידה מועדפים
- סגנון למידה (ויזואלי, שמיעתי, אינטראקטיבי)
- תחומי חוזק וחולשה
- המלצות להמשך למידה יעילה
