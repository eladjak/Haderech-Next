# בוט אישי חכם - תיעוד

הבוט האישי החכם הוא אחת התכונות המרכזיות באפליקציה "הדרך", שמספק חווית למידה אישית ואינטראקטיבית למשתמשים.

## סקירה כללית

הבוט האישי הוא ממשק צ'אט אינטליגנטי המסונכרן עם נתוני המשתמש ותוכן הקורסים באפליקציה. הוא מאפשר למשתמשים לתקשר באופן טבעי, לשאול שאלות, לקבל תזכורות ועדכונים, ולקבל סיוע בלמידה.

### יכולות עיקריות

1. **שיחה אינטראקטיבית** - המשתמש יכול לנהל שיחה טבעית עם הבוט בשפה העברית.
2. **סנכרון עם מצב המשתמש** - הבוט מודע להתקדמות המשתמש בקורסים ולפעילות שלו באפליקציה.
3. **תזכורות ועדכונים** - שליחת תזכורות לגבי שיעורים, משימות, ועדכונים חדשים.
4. **סיוע בלמידה** - עזרה בנושאים שהמשתמש מתקשה בהם, הסברים והפניות לחומרי עזר רלוונטיים.
5. **המלצות מותאמות אישית** - המלצות על קורסים, תכנים, ותרגולים בהתאם להעדפות ולהתקדמות המשתמש.

## ארכיטקטורה טכנית

הבוט מבוסס על מספר רכיבים טכניים:

### Client-Side

- **ChatbotContainer** - רכיב React שמכיל את ממשק הצ'אט.
- **ChatbotWindow** - תצוגת החלון של הצ'אט, כולל היסטוריית ההודעות ושדה הקלט.
- **ChatbotProvider** - Context Provider שמנהל את מצב הצ'אט ומאפשר גישה לכל רכיבי האפליקציה.

### Server-Side

- **Chatbot Service** - שירות שמנהל את הלוגיקה של הבוט ואת התקשורת עם API של בינה מלאכותית.
- **OpenAI Integration** - שימוש ב-API של OpenAI לעיבוד שפה טבעית ויצירת תשובות מתאימות.
- **User Context Analyzer** - מנתח את הקונטקסט והפעילות של המשתמש כדי לספק תשובות רלוונטיות.

### Database

- אחסון היסטוריית השיחות בטבלה `chatbot_conversations` ב-Supabase.
- קישור לנתוני המשתמש והקורסים לצורך התאמה אישית.

## תזרים העבודה

1. המשתמש שולח הודעה דרך ממשק הצ'אט.
2. הבקשה נשלחת לשרת דרך API endpoint.
3. שירות הצ'אטבוט מעבד את ההודעה, מנתח את הקונטקסט, ומתקשר עם OpenAI.
4. המערכת מקבלת תשובה מה-AI, מבצעת עיבוד נוסף בהתאם לנתוני המשתמש.
5. התשובה נשלחת חזרה למשתמש ומוצגת בממשק הצ'אט.
6. המערכת שומרת את השיחה בבסיס הנתונים לשימוש עתידי.

## אינטגרציה עם מערכות אחרות

הבוט משתלב עם מערכות אחרות באפליקציה:

- **מערכת הקורסים** - מקבל מידע על תוכן הקורסים, מערכי שיעור, ומצב ההתקדמות של המשתמש.
- **פרופיל המשתמש** - ניגש לנתוני המשתמש, העדפות, והיסטוריית פעילות.
- **מערכת ההתראות** - יכול ליזום התראות ותזכורות למשתמש.
- **פורום הקהילה** - יכול להמליץ על נושאים רלוונטיים בפורום ולהפנות לדיונים מעניינים.

## התנהגות במצבי קצה

הבוט מתוכנן להתמודד עם מגוון מצבים:

- **חוסר קישוריות** - שמירת הודעות במצב offline וסנכרון כשהחיבור חוזר.
- **שאלות מחוץ לתחום** - זיהוי שאלות לא רלוונטיות והכוונת המשתמש חזרה לנושאי האפליקציה.
- **אבטחה ופרטיות** - הקפדה על אבטחת מידע ופרטיות המשתמש.

## מידע למפתחים

### יצירת שינויים בבוט

כדי לשנות את התנהגות הבוט, יש לעדכן את הקבצים הבאים:

1. `src/components/chatbot/` - רכיבי ה-UI של הבוט.
2. `src/lib/services/chatbot.ts` - שירות הבוט שמטפל בלוגיקה.
3. `src/app/api/chatbot/` - API endpoints לתקשורת עם הבוט.

### הוספת יכולות חדשות

כדי להוסיף יכולות חדשות לבוט:

1. הגדר את היכולת החדשה ב-`src/types/chatbot.ts`.
2. הוסף לוגיקה מתאימה ב-`src/lib/services/chatbot.ts`.
3. עדכן את הממשק ב-`src/components/chatbot/ChatbotWindow.tsx`.
4. הוסף בדיקות מתאימות ב-`src/tests/chatbot/`.

## סטטוס פיתוח

- [x] יצירת ממשק בסיסי לצ'אט
- [x] אינטגרציה עם OpenAI API
- [ ] סנכרון עם מערכת הקורסים
- [ ] פיתוח מערכת התזכורות והמלצות אישיות
- [ ] שיפור הבנת שפה טבעית בעברית
- [ ] אפשרות להעלאת תמונות ומסמכים לצ'אט

## תוכניות עתידיות

1. **ניתוח רגשי (Sentiment Analysis)** - זיהוי מצב הרגשי של המשתמש והתאמת התגובות.
2. **למידה מתמשכת** - שיפור מתמיד של תשובות הבוט בהתבסס על נתוני שימוש.
3. **תמיכה בקול** - הוספת יכולת שיחה קולית עם הבוט.
4. **בוט קבוצתי** - אפשרות לשימוש בבוט במסגרת למידה קבוצתית.

## מגבלות ידועות

- תמיכה מוגבלת בשאלות מורכבות מאוד או ניואנסים לשוניים עדינים.
- דורש חיבור אינטרנט פעיל לרוב הפעולות.
- מוגבל בהבנת תוכן ויזואלי (בשלב זה).

## נספחים

### דוגמאות לשיחות

```
משתמש: "מתי השיעור הבא שלי?"
בוט: "השיעור הבא שלך בקורס 'תקשורת בינאישית' מתוכנן ליום שלישי, 15:30. האם תרצה שאזכיר לך שעה לפני?"

משתמש: "כן, בבקשה"
בוט: "מצוין! הגדרתי תזכורת לשיעור ביום שלישי בשעה 14:30. אגיד לך גם שהמרצה הוסיף חומר קריאה חדש לשיעור. האם תרצה לראות אותו עכשיו?"
```

### קישורים שימושיים

- [OpenAI API Documentation](https://platform.openai.com/docs/api-reference)
- [React Context API](https://reactjs.org/docs/context.html)
- [Supabase Realtime](https://supabase.com/docs/guides/realtime)
