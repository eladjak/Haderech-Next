#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo '🚀 בודק את הקוד לפני דחיפה...'

# בדיקת טיפוסים מחמירה
echo '📝 בודק טיפוסים...'
pnpm tsc --noEmit --incremental false ||
(
    echo '❌ בדיקת טיפוסים נכשלה. אנא תקן את השגיאות לפני דחיפה.'
    false;
)

# בדיקת לינטינג מחמירה
echo '🔍 בודק לינטינג...'
pnpm lint ||
(
    echo '❌ בדיקת לינטינג נכשלה. אנא תקן את השגיאות לפני דחיפה.'
    false;
)

# בדיקת פורמט
echo '✨ בודק פורמט...'
pnpm format:check ||
(
    echo '❌ בדיקת פורמט נכשלה. אנא הרץ pnpm format לתיקון.'
    false;
)

# בדיקת בנייה
echo '🏗️ בודק בנייה...'
pnpm build ||
(
    echo '❌ בדיקת בנייה נכשלה. אנא תקן את השגיאות לפני דחיפה.'
    false;
)

echo '✅ כל הבדיקות עברו בהצלחה! דוחף שינויים...' 